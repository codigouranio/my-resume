#!/bin/bash
# Fix subdomain SSL/TLS configuration for Cloudflare

echo "üîß Subdomain Setup Complete!"
echo ""
echo "‚úÖ Nginx Configuration:"
echo "   - api.resumecast.ai ‚Üí http://localhost:3000"
echo "   - llm.resumecast.ai ‚Üí http://localhost:5000"
echo "   - resumecast.ai ‚Üí Frontend"
echo ""
echo "‚úÖ SSL Certificates:"
echo "   - api.resumecast.ai: Installed"
echo "   - llm.resumecast.ai: Installed"
echo ""
echo "‚úÖ Services:"
echo "   - API Service: Running (2 instances)"
echo "   - LLM Service: Running (1 instance)"
echo ""
echo "‚ö†Ô∏è  CLOUDFLARE CONFIGURATION REQUIRED:"
echo ""
echo "1. Go to Cloudflare Dashboard ‚Üí DNS"
echo "   https://dash.cloudflare.com/"
echo ""
echo "2. For api.resumecast.ai and llm.resumecast.ai:"
echo "   - SSL/TLS mode: Full (strict)"
echo "   OR"
echo "   - Set DNS records to 'DNS only' (grey cloud icon)"
echo ""
echo "3. Current issue: Redirect loop (301)"
echo "   This happens when Cloudflare proxy is on (orange cloud)"
echo "   but SSL mode is set to 'Flexible' instead of 'Full (strict)'"
echo ""
echo "üß™ Test endpoints:"
echo "   curl https://api.resumecast.ai/docs"
echo "   curl https://llm.resumecast.ai/health"
echo "   curl https://resumecast.ai"
echo ""
